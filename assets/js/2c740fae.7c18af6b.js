"use strict";(self.webpackChunkreact_py_docs=self.webpackChunkreact_py_docs||[]).push([[738],{3905:(e,t,n)=>{n.r(t),n.d(t,{MDXContext:()=>m,MDXProvider:()=>p,mdx:()=>b,useMDXComponents:()=>d,withMDXComponents:()=>c});var o=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r.apply(this,arguments)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var m=o.createContext({}),c=function(e){return function(t){var n=d(t.components);return o.createElement(e,r({},t,{components:n}))}},d=function(e){var t=o.useContext(m),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return o.createElement(m.Provider,{value:t},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),c=d(n),p=a,u=c["".concat(i,".").concat(p)]||c[p]||f[p]||r;return n?o.createElement(u,l(l({ref:t},m),{},{components:n})):o.createElement(u,l({ref:t},m))}));function b(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var m=2;m<r;m++)i[m]=n[m];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},9587:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var o=n(7294),a=n(6010);function r(e){const{items:t,isAwaitingInput:n}=e,r=t.filter((e=>!e.hidden));return o.createElement("div",{className:"pointer-events-none z-10 -mb-16 flex justify-end p-2"},o.createElement("div",{className:"pointer-events-auto space-x-2 rounded-md bg-white p-1 opacity-80 shadow-md hover:opacity-100"},n&&o.createElement("div",{className:"inline-flex items-center rounded-md bg-sky-500 px-4 py-2 text-sm font-semibold leading-6 text-white shadow"},o.createElement("svg",{className:"-ml-1 mr-3 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},o.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),o.createElement("span",null,"Awaiting input...")),o.createElement("span",{className:"isolate inline-flex rounded-md"},r.map(((e,t)=>o.createElement("button",{key:e.label,type:"button",onClick:e.onClick,disabled:e.disabled,className:(0,a.default)("relative inline-flex items-center border border-none border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 focus:z-10 focus:outline-none focus:ring-0",e.disabled?"opacity-50 hover:cursor-not-allowed":"opacity-75 hover:cursor-pointer hover:bg-gray-50 hover:opacity-100",0===t&&"rounded-l-md",t===r.length-1&&"rounded-r-md")},o.createElement(e.icon,{className:"-ml-1 mr-2 h-5 w-5 text-gray-400","aria-hidden":"true"}),e.label))))))}},5096:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});var o=n(7294);function a(){return o.createElement("div",{className:"pointer-events-none absolute bottom-0 right-0 z-10 flex justify-end p-2"},o.createElement("div",{className:"inline-flex items-center rounded-md bg-sky-500 px-4 py-2 text-sm font-semibold leading-6 text-white shadow"},o.createElement("svg",{className:"-ml-1 mr-3 h-5 w-5 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},o.createElement("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.createElement("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})),"Setting up environment..."))}},9258:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>C,contentTitle:()=>w,default:()=>L,foliumCode:()=>O,frontMatter:()=>v,matplotlibCode:()=>N,metadata:()=>E,plotlyCode:()=>M,toc:()=>k});var o=n(7462),a=n(7294),r=n(3905),i=n(1262),l=n(2949),s=n(3598),m=n(9587),c=n(5096),d=n(1451),p=n(6533),u=n(4967);const f={enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,highlightActiveLine:!1,showPrintMargin:!1},h=e=>{e.renderer.setScrollMargin(10,10,0,0),e.moveCursorTo(0,0)};function b(e){const{code:t,packages:o}=e,[r,b]=(0,a.useState)(t.trimEnd()),[x,y]=(0,a.useState)(!1);(0,a.useEffect)((()=>{b(t.trimEnd()),y(!1)}),[t]);const{colorMode:g}=(0,l.useColorMode)(),{runPython:v,stdout:w,stderr:E,isLoading:C,isRunning:k,interruptExecution:N}=(0,s.usePython)({packages:o});return a.createElement("div",null,a.createElement("div",{className:"relative mb-10 flex flex-col"},a.createElement(m.default,{items:[{label:"Run",icon:d,onClick:function(){v(r),y(!0)},disabled:C||k,hidden:k},{label:"Stop",icon:p,onClick:function(){N(),y(!1)},hidden:!k},{label:"Reset",icon:u,onClick:function(){y(!1),b(t.trimEnd())},disabled:k}]}),C&&a.createElement(c.default,null),a.createElement(i.default,{fallback:a.createElement("div",null,"Loading...")},(()=>{const e=n(4981).default;return n(4007),n(2777),n(3783),n(2679),a.createElement(e,{value:r,mode:"python",name:"CodeBlock",fontSize:"0.9rem",className:"min-h-[4rem] overflow-clip rounded shadow-md",theme:"dark"===g?"idle_fingers":"textmate",onChange:e=>b(e),width:"100%",maxLines:1/0,onLoad:h,editorProps:{$blockScrolling:!0},setOptions:f})}))),a.createElement("div",null,a.createElement("h2",null,"Result"),E?a.createElement("pre",{className:"mt-4 text-left"},a.createElement("code",{className:"text-red-500"},E)):w&&w.startsWith("data:image/png;base64,")?a.createElement("img",{src:w}):a.createElement("p",{className:"text-sm text-gray-500"},"No image yet. Click run to see the result.")))}const x={enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,highlightActiveLine:!1,showPrintMargin:!1},y=e=>{e.renderer.setScrollMargin(10,10,0,0),e.moveCursorTo(0,0)};function g(e){const{code:t,packages:o}=e,[r,f]=(0,a.useState)(t.trimEnd()),[h,b]=(0,a.useState)(!1);(0,a.useEffect)((()=>{f(t.trimEnd()),b(!1)}),[t]);const{colorMode:g}=(0,l.useColorMode)(),{runPython:v,stdout:w,stderr:E,isLoading:C,isRunning:k,interruptExecution:N}=(0,s.usePython)({packages:o});return a.createElement("div",null,a.createElement("div",{className:"relative mb-10 flex flex-col"},a.createElement(m.default,{items:[{label:"Run",icon:d,onClick:function(){v(r),b(!0)},disabled:C||k,hidden:k},{label:"Stop",icon:p,onClick:function(){N(),b(!1)},hidden:!k},{label:"Reset",icon:u,onClick:function(){b(!1),f(t.trimEnd())},disabled:k}]}),C&&a.createElement(c.default,null),a.createElement(i.default,{fallback:a.createElement("div",null,"Loading...")},(()=>{const e=n(4981).default;return n(4007),n(2777),n(3783),n(2679),a.createElement(e,{value:r,mode:"python",name:"CodeBlock",fontSize:"0.9rem",className:"min-h-[4rem] overflow-clip rounded shadow-md",theme:"dark"===g?"idle_fingers":"textmate",onChange:e=>f(e),width:"100%",maxLines:1/0,onLoad:y,editorProps:{$blockScrolling:!0},setOptions:x})}))),a.createElement("div",null,a.createElement("h2",null,"Result"),E?a.createElement("pre",{className:"mt-4 text-left"},a.createElement("code",{className:"text-red-500"},E)):w?a.createElement("iframe",{srcDoc:w,className:"h-96 w-full"}):a.createElement("p",{className:"text-sm text-gray-500"},"No output yet. Click run to see the result.")))}const v={sidebar_position:9},w="Data Visualisation",E={unversionedId:"examples/data-visualisation",id:"examples/data-visualisation",title:"Data Visualisation",description:"Some data visualisation libraries can be used, but require some workarounds.",source:"@site/docs/examples/data-visualisation.mdx",sourceDirName:"examples",slug:"/examples/data-visualisation",permalink:"/react-py/docs/examples/data-visualisation",draft:!1,tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"User Input",permalink:"/react-py/docs/examples/user-input"}},C={},k=[{value:"Matplotlib",id:"matplotlib",level:2},{value:"Patching <code>matplotlib.pyplot.show</code>",id:"patching-matplotlibpyplotshow",level:3},{value:"Folium",id:"folium",level:2},{value:"Plotly",id:"plotly",level:2}],N="import os\nimport base64\nfrom io import BytesIO\n\n# Set this _before_ importing matplotlib\nos.environ['MPLBACKEND'] = 'AGG'\n\nimport matplotlib.pyplot as plt\n\n# Patch\ndef ensure_matplotlib_patch():\n  _old_show = plt.show\n\n  def show():\n    buf = BytesIO()\n    plt.savefig(buf, format='png')\n    buf.seek(0)\n    # Encode to a base64 str\n    img = 'data:image/png;base64,' + \\\n    base64.b64encode(buf.read()).decode('utf-8')\n    # Write to stdout\n    print(img)\n    plt.clf()\n\n  plt.show = show\n\n\nensure_matplotlib_patch()\n\n# Plot\nfig, ax = plt.subplots()\nax.plot([1,3,2])\n\nplt.show()\n",O="import folium\n\n# Create a map centered at a specific location\nm = folium.Map(location=[37.7749, -122.4194], zoom_start=10)\n\n# Add a marker to the map\nfolium.Marker(\n    location=[37.7749, -122.4194],\n    popup=\"San Francisco, CA\",\n    icon=folium.Icon(color='blue')\n).add_to(m)\n\n# Get the HTML content of the map\nmap_html = m.get_root().render()\n\n# Print the HTML to stdout\nprint(map_html)\n",M="import plotly.express as px\n\n# Sample data\nx = [1, 2, 3, 4, 5]\ny = [2, 4, 1, 3, 7]\n\n# Create a line chart\nfig = px.line(x=x, y=y, title='Simple Line Chart')\n\n# Get the HTML content of the chart\nchart_html = fig.to_html()\n\n# Print the HTML to stdout\nprint(chart_html)\n",P={toc:k,matplotlibCode:N,foliumCode:O,plotlyCode:M},T="wrapper";function L(e){let{components:t,...n}=e;return(0,r.mdx)(T,(0,o.default)({},P,n,{components:t,mdxType:"MDXLayout"}),(0,r.mdx)("h1",{id:"data-visualisation"},"Data Visualisation"),(0,r.mdx)("p",null,"Some data visualisation libraries can be used, but require some workarounds."),(0,r.mdx)("h2",{id:"matplotlib"},"Matplotlib"),(0,r.mdx)("p",null,"By default, matplotlib relies on the import statement ",(0,r.mdx)("inlineCode",{parentName:"p"},"from js import document"),", which does not work from within a web worker."),(0,r.mdx)("p",null,"One workaround is to patch the default behaviour of ",(0,r.mdx)("inlineCode",{parentName:"p"},"matplotlib.pyplot.show"),"."),(0,r.mdx)("h3",{id:"patching-matplotlibpyplotshow"},"Patching ",(0,r.mdx)("inlineCode",{parentName:"h3"},"matplotlib.pyplot.show")),(0,r.mdx)("p",null,"The following patch sets matplotlib to use the ",(0,r.mdx)("inlineCode",{parentName:"p"},"AGG")," renderer. ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/pyodide/matplotlib-pyodide/issues/6#issuecomment-1242747625"},"Source"),"."),(0,r.mdx)("admonition",{type:"caution"},(0,r.mdx)("p",{parentName:"admonition"},"This workaround relies on the base64 string to be printed to ",(0,r.mdx)("inlineCode",{parentName:"p"},"stdout"),".")),(0,r.mdx)(b,{code:N,packages:{official:["matplotlib"]},mdxType:"ImageExample"}),(0,r.mdx)("p",null,"You can find the source code for this example ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/elilambnz/react-py/blob/main/website/src/components/ImageExample.tsx"},"here"),"."),(0,r.mdx)("h2",{id:"folium"},"Folium"),(0,r.mdx)("admonition",{type:"caution"},(0,r.mdx)("p",{parentName:"admonition"},"This workaround relies on the HTML output to be printed to ",(0,r.mdx)("inlineCode",{parentName:"p"},"stdout"),".")),(0,r.mdx)(g,{code:O,packages:{micropip:["folium"]},mdxType:"HTMLExample"}),(0,r.mdx)("p",null,"You can find the source code for this example ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/elilambnz/react-py/blob/main/website/src/components/HTMLExample.tsx"},"here"),"."),(0,r.mdx)("h2",{id:"plotly"},"Plotly"),(0,r.mdx)("admonition",{type:"caution"},(0,r.mdx)("p",{parentName:"admonition"},"This workaround relies on the HTML output to be printed to ",(0,r.mdx)("inlineCode",{parentName:"p"},"stdout"),".")),(0,r.mdx)(g,{code:M,packages:{official:["pandas"],micropip:["plotly"]},mdxType:"HTMLExample"}),(0,r.mdx)("p",null,"You can find the source code for this example ",(0,r.mdx)("a",{parentName:"p",href:"https://github.com/elilambnz/react-py/blob/main/website/src/components/HTMLExample.tsx"},"here"),"."))}L.isMDXComponent=!0}}]);